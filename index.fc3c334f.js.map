{"mappings":"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","sources":["src/index.js","src/js/filter.js","src/js/onSearch.js"],"sourcesContent":["import getRefs from './js/get-refs';\nimport openMovieDetails from './js/movie-details-open';\nimport footerModal from './js/footer-modal-open';\nimport { moviesApi, customPagination } from './js/gallery/';\nimport './js/nightMode';\nimport topUp from './js/top.js';\nimport './js/filter';\n\nimport { spinnerOn } from './js/loader';\nimport onSearch from './js/onSearch';\nimport checkAuth from './js/auth';\n// import renderPagination from './js/pagination';\n\nimport userAuth from './js/auth';\n\nconst refs = getRefs();\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  moviesApi.currentFetch = moviesApi.fetchTrendWeekMovies;\n  customPagination.moveToPage(moviesApi.currentPage);\n});\n\n// ------------ OPEN MOVIE MODAL --------------------\n\nrefs.imagesContainer.addEventListener('click', onMovieCardClick);\nasync function onMovieCardClick(e) {\n  if (e.target.classList.contains('gallery__img')) {\n    e.preventDefault();\n    const movieId = e.target.dataset.movieId;\n    await openMovieDetails(moviesApi.fetchMovieByID(movieId));\n    const authButtons = document.querySelectorAll('.auth-required')\n   \n    checkAuth(authButtons)\n  }\n}\n// ---------- OPEN MOVIE MODAL END -------------------\n\nfooterModal();\n\n// async function fetchTrendMovies() {\n//   try {\n//     const { results, total_results, page } =\n//       await moviesApi.fetchTrendWeekMovies();\n\n//     results.length &&\n//       refs.imagesContainer.insertAdjacentHTML(\n//         'afterbegin',\n//         results.map(createMarkupElement).join('')\n//       );\n\n//     // pagination\n//     // const instance = createPagination();\n//     // instance.setItemsPerPage(20);\n//     // instance.setTotalItems(total_results);\n//     // instance.movePageTo(page);\n\n//     // instance.on('afterMove', event => {\n//     //   const currentPage = event.page;\n//     //   window.scrollTo({ top: 240, behavior: 'smooth' });\n//     // });\n\n//     // results.length &&\n//     //   refs.imagesContainer.insertAdjacentHTML(\n//     //     'afterbegin',\n//     //     results.map(createMarkupElement).join('')\n//     //   );\n\n\n//   } catch (error) {\n//     console.log(error);\n//   }\n// }\n\nrefs.searchForm.addEventListener('submit', onSearch);\ntopUp();\n","import { moviesApi, customPagination } from './gallery';\n\nimport getRefs from './get-refs';\n\nconst refs = getRefs();\n\n// set genres\nlet selectedGenre = [];\nlet selectedGenreName = [];\nsetGenre();\n\nasync function setGenre() {\n  try {\n    const genre = await moviesApi.getAllGenres();\n\n    genre.forEach(genre => {\n      const elem = document.createElement('li');\n      elem.classList.add('filter__genre-item');\n      elem.id = genre.id;\n      elem.innerText = genre.name;\n      elem.addEventListener('click', () => {\n        if (selectedGenre.length === 0) {\n          selectedGenre.push(genre.id);\n          selectedGenreName.push(genre.name);\n        } else {\n          if (selectedGenre.includes(genre.id)) {\n            selectedGenre.forEach((id, index) => {\n              if (id === genre.id) {\n                selectedGenre.splice(index, 1);\n                selectedGenreName.splice(index, 1);\n              }\n            });\n          } else {\n            selectedGenre.push(genre.id);\n            selectedGenreName.push(genre.name);\n          }\n        }\n\n        refs.searchInput.value = '';\n        moviesApi.currentPage = 1;\n        moviesApi.genres = selectedGenre;\n        moviesApi.currentFetch = moviesApi.fetchMovieByGenres;\n        customPagination.moveToPage(moviesApi.currentPage);\n\n        highlightSelection();\n        updateFilterSelectBtn();\n      });\n      refs.filterGenreList.append(elem);\n    });\n  } catch (error) {}\n}\n\n// highlight selected genre\nfunction highlightSelection() {\n  const genres = document.querySelectorAll('.filter__genre-item');\n  genres.forEach(genre => {\n    genre.classList.remove('filter__genre-item--highlight');\n  });\n  if (selectedGenre.length !== 0) {\n    refs.filterClear.classList.remove('filter--hidden');\n    selectedGenre.forEach(id => {\n      const filterHighlightedGenre = document.getElementById(id);\n      filterHighlightedGenre.classList.add('filter__genre-item--highlight');\n    });\n  } else {\n    refs.filterClear.classList.add('filter--hidden');\n    fetchTrendMovies();\n  }\n}\n\n// clear filter\nrefs.filterClear.addEventListener('click', onFilterClearBtn);\n\nfunction onFilterClearBtn() {\n  clearFilter();\n  fetchTrendMovies();\n}\n\nexport function clearFilter() {\n  if (selectedGenre.length !== 0) {\n    selectedGenre.forEach(id => {\n      const filterHighlightedGenre = document.getElementById(id);\n      filterHighlightedGenre.classList.remove('filter__genre-item--highlight');\n    });\n  }\n  selectedGenre = [];\n  selectedGenreName = [];\n  refs.filterClear.classList.add('filter--hidden');\n  refs.filterSelectBtn.innerHTML = 'Select genre';\n}\n\n// custom select\nrefs.filterSelectBtn.addEventListener('click', onFilterSelectBtn);\n\nfunction onFilterSelectBtn() {\n  refs.filterWrap.classList.toggle('filter--active');\n}\n\nfunction updateFilterSelectBtn() {\n  if (selectedGenreName.length === 0) {\n    refs.filterSelectBtn.innerHTML = 'Select genre';\n    return;\n  }\n  if (selectedGenreName.length === 1) {\n    refs.filterSelectBtn.innerHTML = selectedGenreName[0];\n    return;\n  }\n  if (selectedGenreName.length > 1) {\n    refs.filterSelectBtn.innerHTML = selectedGenreName[0] + '...';\n    return;\n  }\n}\n\n// fetch trend movies\n\nfunction fetchTrendMovies() {\n  moviesApi.currentPage = 1;\n  moviesApi.currentFetch = moviesApi.fetchTrendWeekMovies;\n  customPagination.moveToPage(moviesApi.currentPage);\n}\n\n// hide genre list by clicking outside\ndocument.onclick = function closeList(e) {\n  if (!refs.filterWrap.contains(e.target)) {\n    refs.filterWrap.classList.remove('filter--active');\n  }\n};\n","import getRefs from './get-refs';\nimport { moviesApi, customPagination } from './gallery';\nimport { clearFilter } from './filter';\n\nconst refs = getRefs();\n\nexport default function onSearch(e) {\n  e.preventDefault();\n  clearFilter();\n\n  moviesApi.query = refs.searchInput.value;\n  moviesApi.currentFetch = moviesApi.fetchMovieQuery;\n  customPagination.moveToPage(moviesApi.currentPage);\n}\n"],"names":["$bpxeT","parcelRequire","$6142fea1849c7fbd$var$refs","default","$6142fea1849c7fbd$var$selectedGenre","$6142fea1849c7fbd$var$selectedGenreName","$6142fea1849c7fbd$var$_setGenre","$parcel$interopDefault","$2TvXO","mark","_callee","$cIRAk","moviesApi","getAllGenres","_ctx","sent","forEach","genre","elem","document","createElement","classList","add","id","innerText","name","addEventListener","length","push","includes","index","splice","searchInput","value","currentPage","genres","currentFetch","fetchMovieByGenres","customPagination","moveToPage","$6142fea1849c7fbd$var$highlightSelection","$6142fea1849c7fbd$var$updateFilterSelectBtn","filterGenreList","append","apply","this","arguments","querySelectorAll","remove","filterClear","getElementById","$6142fea1849c7fbd$var$fetchTrendMovies","$6142fea1849c7fbd$export$77cedf2a856f1597","filterSelectBtn","innerHTML","fetchTrendWeekMovies","$6142fea1849c7fbd$var$setGenre","filterWrap","toggle","onclick","e","contains","target","$3vKGz","$749ffb571b0aa3a9$var$refs","$b8f9b7833fa37166$var$refs","$b8f9b7833fa37166$var$_onMovieCardClick","movieId","authButtons","preventDefault","dataset","$gBkTQ","fetchMovieByID","$euqRf","imagesContainer","$2EooH","searchForm","query","fetchMovieQuery","$d43SW"],"version":3,"file":"index.fc3c334f.js.map"}