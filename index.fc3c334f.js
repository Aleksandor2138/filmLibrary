!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},i={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in i){var t=i[e];delete i[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var c=new Error("Cannot find module '"+e+"'");throw c.code="MODULE_NOT_FOUND",c}).register=function(e,t){i[e]=t},t.parcelRequired7c6=r);var c=r("bpxeT"),a=r("2TvXO"),o=r("3vKGz"),l=r("gBkTQ"),s=r("2EooH"),u=r("cIRAk");r("5jy86");var f=r("d43SW"),d=(c=r("bpxeT"),a=r("2TvXO"),u=r("cIRAk"),(0,(o=r("3vKGz")).default)()),v=[],p=[];function m(){return(m=e(c)(e(a).mark((function t(){return e(a).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.moviesApi.getAllGenres();case 3:e.sent.forEach((function(e){var t=document.createElement("li");t.classList.add("filter__genre-item"),t.id=e.id,t.innerText=e.name,t.addEventListener("click",(function(){0===v.length?(v.push(e.id),p.push(e.name)):v.includes(e.id)?v.forEach((function(t,n){t===e.id&&(v.splice(n,1),p.splice(n,1))})):(v.push(e.id),p.push(e.name)),d.searchInput.value="",u.moviesApi.currentPage=1,u.moviesApi.genres=v,u.moviesApi.currentFetch=u.moviesApi.fetchMovieByGenres,u.customPagination.moveToPage(u.moviesApi.currentPage),g(),A()})),d.filterGenreList.append(t)})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function g(){document.querySelectorAll(".filter__genre-item").forEach((function(e){e.classList.remove("filter__genre-item--highlight")})),0!==v.length?(d.filterClear.classList.remove("filter--hidden"),v.forEach((function(e){document.getElementById(e).classList.add("filter__genre-item--highlight")}))):(d.filterClear.classList.add("filter--hidden"),L())}function h(){0!==v.length&&v.forEach((function(e){document.getElementById(e).classList.remove("filter__genre-item--highlight")})),v=[],p=[],d.filterClear.classList.add("filter--hidden"),d.filterSelectBtn.innerHTML="Select genre"}function A(){0!==p.length?1!==p.length?p.length>1&&(d.filterSelectBtn.innerHTML=p[0]+"..."):d.filterSelectBtn.innerHTML=p[0]:d.filterSelectBtn.innerHTML="Select genre"}function L(){u.moviesApi.currentPage=1,u.moviesApi.currentFetch=u.moviesApi.fetchTrendWeekMovies,u.customPagination.moveToPage(u.moviesApi.currentPage)}!function(){m.apply(this,arguments)}(),d.filterClear.addEventListener("click",(function(){h(),L()})),d.filterSelectBtn.addEventListener("click",(function(){d.filterWrap.classList.toggle("filter--active")})),document.onclick=function(e){d.filterWrap.contains(e.target)||d.filterWrap.classList.remove("filter--active")},r("kvC6y");o=r("3vKGz"),u=r("cIRAk");var y=(0,o.default)();var T=r("euqRf"),E=(T=r("euqRf"),(0,o.default)());function k(){return(k=e(c)(e(a).mark((function t(n){var i,r;return e(a).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.target.classList.contains("gallery__img")){e.next=7;break}return n.preventDefault(),i=n.target.dataset.movieId,e.next=5,(0,l.default)(u.moviesApi.fetchMovieByID(i));case 5:r=document.querySelectorAll(".auth-required"),(0,T.default)(r);case 7:case"end":return e.stop()}}),t)})))).apply(this,arguments)}document.addEventListener("DOMContentLoaded",(function(){u.moviesApi.currentFetch=u.moviesApi.fetchTrendWeekMovies,u.customPagination.moveToPage(u.moviesApi.currentPage)})),E.imagesContainer.addEventListener("click",(function(e){return k.apply(this,arguments)})),(0,s.default)(),E.searchForm.addEventListener("submit",(function(e){e.preventDefault(),h(),u.moviesApi.query=y.searchInput.value,u.moviesApi.currentFetch=u.moviesApi.fetchMovieQuery,u.customPagination.moveToPage(u.moviesApi.currentPage)})),(0,f.default)()}();
//# sourceMappingURL=index.fc3c334f.js.map
